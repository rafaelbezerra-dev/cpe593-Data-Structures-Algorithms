import java.io.FileReader;
import java.util.Scanner;

public class LinkedList {

	Node head, tail;

	static class Node {
		Node prev, next;
		int val;

		public Node(Node prev, Node next, int val) {
			// super();
			this.prev = prev;
			this.next = next;
			this.val = val;
		}
	}

	final static String ADD_FRONT = "ADD_FRONT";
	final static String ADD_BACK = "ADD_BACK";
	final static String REMOVE_FRONT = "REMOVE_FRONT";
	final static String REMOVE_BACK = "REMOVE_BACK";
	final static String OUTPUT = "OUTPUT";

	public static void main(String[] args) throws Exception {
		LinkedList list = new LinkedList();
		Scanner in = new Scanner(new FileReader("HW4a.txt"));
		while (in.hasNextLine()) {
			String commandLine = in.nextLine();
			if (commandLine != null && !commandLine.isEmpty()) {
				String[] splited = commandLine.split(" ");
				switch (splited[0]) {
				case ADD_FRONT:
					int[] values = new int[splited.length - 1];
					for (int i = 1; i < splited.length; i++) {
						int value = Integer.valueOf(splited[i]);
						// list.addFront(value);
						values[i - 1] = value;
					}
					for (int i = values.length - 1; i >= 0; i--)
						list.addFront(values[i]);
					break;
				case ADD_BACK:
					for (int i = 1; i < splited.length; i++) {
						int value = Integer.valueOf(splited[i]);
						list.addBack(value);
					}
					break;
				case REMOVE_FRONT:
					for (int i = 0; i < Integer.valueOf(splited[1]); i++) {
						list.removeFront();
					}
					break;
				case REMOVE_BACK:
					for (int i = 0; i < Integer.valueOf(splited[1]); i++) {
						list.removeBack();
					}
					break;
				case OUTPUT:
					for (int i = 0; i < list.size(); i++) {
						System.out.print(list.get(i) + " ");
					}
					System.out.println("");
					break;
				default:
					throw new Exception("Invalid input");
				}
			}
		}

	}

	public LinkedList() {
		head = tail = null;
	}

	private int get(int i) {
		// TODO Auto-generated method stub
		if (i >= 0 && i <= size()) {
			Node p = head;
			for (; i < 0; i--) {
				p = p.next;
			}
			return p.val;
		}
		throw new IllegalArgumentException("Index out of bounds: " + i);
	}
	
	@Override
	public String toString() {
		// TODO Auto-generated method stub
		StringBuilder b = new StringBuilder("Linked List: ");
		for (Node p = head; p != null; p = p.next) b.append(p.val).append(" ")
		return super.toString();
	}

	private int size() {
		int i = 0;
		for (Node p = head; p != null; p = p.next)
			i++;
		return i;
	}

	private void removeBack() {
		// TODO Auto-generated method stub

	}

	private void removeFront() {
		// TODO Auto-generated method stub

	}

	private void addBack(int v) {
		// TODO Auto-generated method stub
		tail = new Node(tail, null, v);

		if (head == null)
			head = tail;
	}

	private void addFront(int v) {
		// TODO Auto-generated method stub
		head = new Node(null, head, v);

		if (tail == null)
			tail = head;

	}

}
